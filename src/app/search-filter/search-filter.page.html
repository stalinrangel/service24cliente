<ion-header>
  <ion-toolbar color="secondary" mode="md">
  	<ion-buttons slot="start" class="icon-back" default-href="tabs">
	   <ion-back-button text="" icon="chevron-back-sharp" mode="md">
        </ion-back-button>
	</ion-buttons>
    <ion-title class="ion-text-capitalize ion-text-center">
      {{ 'SEARCH.title' | translate }}
    </ion-title>
    <ion-buttons slot="end" (click)="viewNotification()">
      <ion-button>
        <div class="icon-bagde" *ngIf="show_notify"></div>
        <ion-icon name="notifications-outline" style="font-size: 25px;"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  
  <div class="header" id="search">
    <input type="text" class="nuevo-input nuevo-input-password" type="text" placeholder="{{ 'SEARCH.search' | translate }}"  [(ngModel)]="searchText" >
    <ion-icon name="search" class="icon-eye nuevo-input-password2" ></ion-icon>
    <div style="font-size: 30px; display: flex; justify-content: center; align-items: center;"> <ion-icon name="filter-circle-outline" (click)="setOpen(true)"></ion-icon></div>
   
  </div>
</ion-header>

<ion-content>
  <ion-list>
    <div *ngFor="let item of filteredItems" (click)="setProvider(item)" class="cuadro-azul" [ngStyle]="{'background': item.plan.tipo_plan === 'PREMIUM' ? '#ffd1be' : ''}">
      <div class="label1">
        <div class="nuevo-label">
          <p class="title-menu">{{item.nombre}}</p>
          <p class="sub-title" style="font-weight: bold;">{{item.categoria}}-{{item.subcategoria}}</p>
          <p class="sub-title">Proveedor: {{item.establecimiento.nombre}}</p>
         
          
        </div>
        <img *ngIf="item.establecimiento.usuario != null" src="{{item.imagen}}" class="imagen">
        <img *ngIf="item.establecimiento.usuario == null" src="{{item.imagen}}" class="imagen">
      </div>
      <div class="label2">
        <p class="status-item color-yellow" > <span class="green"></span>Disponible</p>
        <div class="label22">
          <div style="display: flex;flex-direction: row; justify-content: center;margin-right: 5px;"><p style="color: #FD682A;font-size: 14px;">{{item.promedio_calificacion}}</p><img src="../../assets/service24/star.svg" alt="" style="width: 20px; height: 20px;"></div>
          <p style="margin-top: 0px;">({{item.calificaciones.length}})</p>
          <ion-icon name="heart-outline" class="fav"></ion-icon>
        </div>
      </div>
      <div style="display: flex;">
        <!--p class="new-address"> {{item.establecimiento.direccion}}</p-->
        <ion-icon name="locate" style="margin-right: 3px;"></ion-icon><p class="new-address">{{item.distance}} km</p>
      </div>
    </div>
  </ion-list>
   <ion-list #mylist [hidden]="searchText!=''">
    <ion-item-sliding *ngFor="let item of items" class="slide-history" no-padding>
      <ion-item class="item-history" (click)="setHistory(item)">
        <ion-label style="display: flex;justify-content: space-between;">
          <p class="title-history" >{{ item.title }}</p>
          <p text-right class="date-history" >{{ item.modified | date:'short'}}</p>
        </ion-label>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="deleteItem(item)"><ion-icon md="md-close" ios="md-close" style="font-size: 20px;"></ion-icon></ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
   </ion-list>
   <!--div [hidden]="!searching">
      <p class="item-result" *ngIf="results > 1">{{results}} {{ 'SEARCH.results' | translate }}</p>
      <p class="item-result" *ngIf="results == 1">{{results}} {{ 'SEARCH.result' | translate }}</p>
      <ion-list>
        <ion-item lines="full" *ngFor="let itemd of item" (click)="setProvider(itemd)" [hidden]="itemd.id == 1 || itemd.status == 4 || itemd.establecimiento.usuario == null">
          <ion-thumbnail slot="start">
            <img *ngIf="itemd.establecimiento.usuario != null" src="{{itemd.imagen}}">
            <img *ngIf="itemd.establecimiento.usuario == null" src="{{itemd.imagen}}">
          </ion-thumbnail>
          <ion-label class="item-info">
            <h2>{{itemd.establecimiento.nombre}}</h2>
            <h2 style="font-size: 11px;color: #4d4d4d;">{{itemd.nombre}}</h2>
            <!--ion-icon slot="icon-only" md="ios-star" ios="ios-star" *ngFor="let current of [1, 2, 3, 4, 5]; let i = index" class="icon-star" [ngClass]="{'filled': i < itemd.promedio_calificacion}"></ion-icon>
            <ion-rating-stars
              [rating]="itemd.promedio_calificacion"
              [color]="'darkgrey'"
              [filledColor]="'orange'"
              [margin]="2"
              [size]="20"
              [disabled]="true"
              [opacity]="0.5">
            </ion-rating-stars>
            <div class="content-address">
              <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> {{itemd.establecimiento.direccion}}</p>
              <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> {{itemd.distance}} km</p>
            </div>
            <div class="content-desp">
              <p text-wrap class="info">{{itemd.descripcion}}</p>
              <p *ngIf="itemd.estado == 'ON'" class="status-disp">Disponible</p>
              <p *ngIf="itemd.estado == 'OFF'" class="status-nodisp">No Disponible</p>
            </div>
          </ion-label>
        </ion-item>
        <p *ngIf="item.length == 0" class="text-empty">{{ 'SEARCH.empty' | translate }}</p>
      </ion-list>
   </div-->
</ion-content>



  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Filtrar</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="setOpen(false)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-button expand="block" class="ion-text-capitalize btn-init2" style=" font-weight: bold;" (click)="cercanos();setOpen(false)">MÃ¡s cercanos </ion-button>
        <ion-button expand="block" class="ion-text-capitalize btn-init2" style=" font-weight: bold;" (click)="calificaciones();setOpen(false)">Mejores calificaciones </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>
