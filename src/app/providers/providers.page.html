<ion-header>
  <ion-toolbar color="secondary" mode="md">
  	<ion-buttons slot="start" class="icon-back" default-href="tabs">
	   <ion-back-button text="" icon="md-arrow-back" mode="md">
        </ion-back-button>
	</ion-buttons>
    <ion-title class="ion-text-capitalize ion-text-center">
      {{ 'SUPPLIERS.title' | translate }}
    </ion-title>
    <ion-buttons slot="end" (click)="viewNotification()">
      <ion-button>
        <div class="icon-bagde" *ngIf="show_notify"></div>
        <ion-icon name="notifications" style="font-size: 25px;"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar class="content-search" mode="md">
    <ion-searchbar 
    placeholder="{{ 'SUPPLIERS.search' | translate }}" 
    color="light" 
    searchIcon="icono-lupa"
    mode="md"
    [(ngModel)]="searchTerm"
    (ionChange)="setFilteredItems()"
    ></ion-searchbar>
    <ion-buttons slot="end">
      <ion-button class="btn-search" (click)="goFilter()">
        <ion-icon slot="icon-only" name="arrow-dropup" class="custom-filter"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="providers">
    <p class="item-result" *ngIf="results > 1">{{results}} {{ 'SUPPLIERS.results' | translate }}</p>
    <p class="item-result" *ngIf="results == 1">{{results}} {{ 'SUPPLIERS.result' | translate }}</p>
    <div class="content-zone" (click)="goFilter()">
      <p><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> {{zone.nombre}}
      </p>
    </div>
  	<ion-list>
  		<ion-item lines="full" *ngFor="let item of items" (click)="setProvider(item)">
  		  <ion-thumbnail slot="start">
  		    <img *ngIf="item.establecimiento.usuario != null" src="{{item.imagen}}">
          <img *ngIf="item.establecimiento.usuario == null" src="{{item.imagen}}">
  		  </ion-thumbnail>
  		  <ion-label class="item-info">
          <h2>{{item.establecimiento.nombre}}</h2>
  		    <h2 style="font-size: 11px;color: #4d4d4d;">{{item.nombre}}</h2>
          <ion-icon slot="icon-only" name="star" *ngFor="let current of [1, 2, 3, 4, 5]; let i = index" class="icon-star" [ngClass]="{'filled': i < item.promedio_calificacion}"></ion-icon>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> {{item.establecimiento.direccion}}</p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> {{item.distance}} km</p>
          </div>
          <div class="content-desp">
            <p text-wrap class="info">{{item.descripcion}}</p>
            <p *ngIf="item.status == 1" class="status-disp">Disponible</p>
            <p *ngIf="item.status == 2" class="status-nodisp">No Disponible</p>
          </div>
  		  </ion-label>
  		</ion-item>
      <p *ngIf="showItem" class="text-empty">{{ 'SUPPLIERS.empty' | translate }}</p>
  	</ion-list>
  </div>
  <!-- Skeleton screen -->
  <div *ngIf="!providers">
    <ion-list>
      <ion-item lines="full">
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label class="item-info">
          <h2><ion-skeleton-text animated></ion-skeleton-text></h2>
          <div class="start-prov">
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </div>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> <ion-skeleton-text animated style="width: 90%;display: inline-block;margin-left: 5px;}"></ion-skeleton-text></p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> <ion-skeleton-text animated></ion-skeleton-text></p>
          </div>
          <p text-wrap class="info1">
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="full">
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label class="item-info">
          <h2><ion-skeleton-text animated></ion-skeleton-text></h2>
          <div class="start-prov">
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </div>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> <ion-skeleton-text animated style="width: 90%;display: inline-block;margin-left: 5px;}"></ion-skeleton-text></p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> <ion-skeleton-text animated></ion-skeleton-text></p>
          </div>
          <p text-wrap class="info1">
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="full">
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label class="item-info">
          <h2><ion-skeleton-text animated></ion-skeleton-text></h2>
          <div class="start-prov">
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </div>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> <ion-skeleton-text animated style="width: 90%;display: inline-block;margin-left: 5px;}"></ion-skeleton-text></p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> <ion-skeleton-text animated></ion-skeleton-text></p>
          </div>
          <p text-wrap class="info1">
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="full">
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label class="item-info">
          <h2><ion-skeleton-text animated></ion-skeleton-text></h2>
          <div class="start-prov">
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </div>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> <ion-skeleton-text animated style="width: 90%;display: inline-block;margin-left: 5px;}"></ion-skeleton-text></p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> <ion-skeleton-text animated></ion-skeleton-text></p>
          </div>
          <p text-wrap class="info1">
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="full">
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label class="item-info">
          <h2><ion-skeleton-text animated></ion-skeleton-text></h2>
          <div class="start-prov">
            <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
          </div>
          <div class="content-address">
            <p class="address"><ion-icon name="arrow-dropup" class="custom1-map"></ion-icon> <ion-skeleton-text animated style="width: 90%;display: inline-block;margin-left: 5px;}"></ion-skeleton-text></p>
            <p class="distance"><ion-icon md="md-locate" ios="md-locate"></ion-icon> <ion-skeleton-text animated></ion-skeleton-text></p>
          </div>
          <p text-wrap class="info1">
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
